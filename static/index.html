<!DOCTYPE html>
<html>
<head>
    <title>Chronic Reader Client</title>
    <script src="/serviceworkerinstall.js"></script>
    <script>
        window.onload = function() {
            fetch("/books")
            .then(response => {
                console.log(response)
                return response.json()
            })
            .then((books) => {
                console.log(books)
                let booklist = document.getElementById("booklist")
                booklist.innerHTML = ""
                for (let i = 0; i < books.length; i++) {
                    let item = document.createElement("li")
                    let itemLink = document.createElement("a")
                    itemLink.href = "/read.html?book=" + books[i].id
                    itemLink.innerHTML = books[i].name
                    item.appendChild(itemLink)
                    booklist.appendChild(item)
                }
            })
        }
    </script>
</head>
<body>
    <h1>Chronic Reader Client</h1>
    <ul id="booklist"></ul>
    <form action="upload" enctype="multipart/form-data" method="post">
        <label for="myFile">Upload Your File</label>
        <input id="myFile" accept=".epub,.cbz,.cbr" name="filename" type="file" />
        <button name="submit" type="submit">Upload File</button>
    </form>
</body>
</html>